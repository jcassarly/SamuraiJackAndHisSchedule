%Copyright 2014 Jean-Philippe Eisenbarth
%This program is free software: you can
%redistribute it and/or modify it under the terms of the GNU General Public
%License as published by the Free Software Foundation, either version 3 of the
%License, or (at your option) any later version.
%This program is distributed in the hope that it will be useful,but WITHOUT ANY
%WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
%PARTICULAR PURPOSE. See the GNU General Public License for more details.
%You should have received a copy of the GNU General Public License along with
%this program.  If not, see <http://www.gnu.org/licenses/>.

%Based on the code of Yiannis Lazarides
%http://tex.stackexchange.com/questions/42602/software-requirements-specification-with-latex
%http://tex.stackexchange.com/users/963/yiannis-lazarides
%Also based on the template of Karl E. Wiegers
%http://www.se.rit.edu/~emad/teaching/slides/srs_template_sep14.pdf
%http://karlwiegers.com
\documentclass{scrreprt}
\usepackage{listings}
\usepackage{underscore}
\usepackage[bookmarks=true]{hyperref}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{longtable}
\usepackage{graphicx}
\graphicspath{ {./images/} }
\hypersetup{
    colorlinks=true,
    bookmarks=false,    % show bookmarks bar?
    pdftitle={Design Document},    % title
    pdfauthor={Jean-Philippe Eisenbarth},                     % author
    pdfsubject={TeX and LaTeX},                        % subject of the document
    pdfkeywords={TeX, LaTeX, graphics, images}, % list of keywords
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=blue,       % color of internal links
    citecolor=black,       % color of links to bibliography
    filecolor=black,        % color of file links
    urlcolor=purple,        % color of external links
    linktoc=page            % only page is linked
}%
\def\myversion{1.0 }
\date{}
%\title{%

%}
\usepackage{hyperref}
\begin{document}

\begin{flushright}
    \rule{16cm}{5pt}\vskip1cm
    \begin{bfseries}
        \Huge{SOFTWARE ARCHITECTURE}\\
        \vspace{1.9cm}
        for\\
        \vspace{1.9cm}
        GBUS Scheduling App\\
        \vspace{1.9cm}
        \LARGE{Version \myversion approved}\\
        \vspace{1.9cm}
        Prepared by Jack Doiron, Jared Cassarly, Shota Nemoto, Martin Peters\\
        \vspace{1.9cm}
        \today\\
    \end{bfseries}
\end{flushright}

\tableofcontents


\chapter*{Revision History}

\begin{center}
    \begin{tabular}{|c|c|c|c|}
        \hline
	    Name & Date & Reason For Changes & Version\\
        \hline
	    Jack Doiron & 2/22/19 & initial draft & 1.0 draft 1\\
        \hline
    \end{tabular}
\end{center}

\chapter{Introduction}

\section{References}
UIPatterns.io. \textit{UI Patterns},\\
http://uipatterns.io

\chapter{User Interface}

this section describes UI

\section{Home Screen}

The Home Screen will be the default page for the application.  It will display the current date, Toolbar, and a view of the user's calendar of events if logged in.  If the user is not logged in, the calendar will be empty. See Figure 2a-2c for a skeleton of the Home Screen on each view mode.

When the application opens, the calendar will show the view with the current day.  swiping left or right will allow the user to look at future or past events (respectively) based on the currently selected view mode.

The Home Screen will also have a Hamburger Menu where the user can access their account information and the General Settings.

In regards to account information, the user will be able to bring up fields to change their account email and password.  Additionally, the user will be able to bring up login, logout, and registration menus from the Hamburger Menu.  See Figure 3a for a skeleton of the Hamburger Menu when the user is logged in and Figure 3b for a skeleton of the Hamburger Menu when the user is logged out.

\section{Event Editing and Creation Menu}

When the user wants to create an event, they will be able to click the Create event on the Toolbar.  When they do so, they will be presented with a choice of creating a Standard, Location, or Deadline event (from a drop down menu). Once the user makes their decision, a form with the necessary items to create an event will be displayed.  All of the items will have default values filled in based on the General Settings or global defaults.
\\\\
Additionally, the same form can be pulled up from any existing event by clicking on  it.  All the default values in the form will be the values stored in the chosen Event object.
\\\\
The form the user sees will have a skeleton matching figure 1 where each field follows the format specified by \textit{UI Patterns}.
\\\\
Once the user finishes filling in the form, they can either save the form and go back to the Home Screen or discard the changes and return to the Home Screen.
\\
One exception to the aforementioned exiting process is with Deadline events.  Once the user clicks save on a Deadline event, they will be presented with a diff between their old calendar and the changes the auto scheduler proposes based on the information provided for the deadline event.  The user will be given the option to accept the changes or reject them (returning them to the input form).  Upon acceptance, the changes are saved and the user goes back to the home screen.
\\\\
The following diagram shows the flow of this editing/creation process.
\\\\
\begin{center}
\includegraphics[scale=0.5]{edit.png}
\end{center}

\subsection{Standard Event Input Fields}
The following table describes the input fields shown to the user for a Standard Event
\begin{center}
\begin{longtable}{ | p{3cm} | p{8cm} | p{4cm} | }
\hline
\textbf{Field Name} & \textbf{Field Type} & \textbf{Default Value for Creation} \\
\hline
Name & Text Field & "" \\
\hline
Description & Text Field & "" \\
\hline
Event Start & Time and Date Input & Current Time and Date \\
\hline
Event End & Time and Date Input & Current Time and Date \\
& & Plus General Settings \\
& & Default Duration \\
\hline
Location & Text Field with Suggestions & General Settings \\
& based on other event locations & Default \\
\hline
Frequency & Drop Down with following choices & Just Once \\
& - Just Once & \\
& - Daily & \\
& - Weekly & \\
& - Monthly & \\
& - Yearly & \\
& - Custom & \\
\hline
Notifications & Drop Down with following choices & General Settings\\
& - Email & Default\\
& - Text & \\
& - Banner & \\
& - Pop-up & \\
& - None & \\
\hline
Notification Time & Number (in minutes) & General Settings \\
Before Event & & Default \\
\hline
Locked & Checkbox & True \\
\hline
\end{longtable}
\end{center}

\subsection{Location Event Input Fields}
The Location event will have have the same input fields as the Standard event except without the Locked field

\subsection{Deadline Event Input Fields}
The following table describes the input fields shown to the user for a Deadline Event

\begin{center}
\begin{longtable}{ | p{3cm} | p{8cm} | p{4cm} | }
\hline
\textbf{Field Name} & \textbf{Field Type} & \textbf{Default Value for Creation} \\
\hline
Name & Text Field & "" \\
\hline
Description & Text Field & "" \\
\hline
Task Start Time & Time and Date Input & Current Time and Date \\
\hline
Task Deadline & Time and Date Input & Current Time and Date \\
& & Plus General Settings \\
& & Default Duration \\
\hline
Location & Text Field with Suggestions & General Settings \\
& based on other event locations & Default \\
\hline
Use Location & Checkbox & True \\
For Auto & & \\
Scheduling & & \\
\hline
Minimum Time & Number & General Settings \\
for Scheduled & & Default\\
Events & & \\
\hline
Maximum Time & Number & General Settings \\
for Scheduled & & Default\\
Events & & \\
\hline
Minimum Break & Number & General Settings \\
Time between & & Default\\
 Scheduled Events & & \\
\hline
Total Time to & Number (in Hours) & Task Deadline \\
Complete Task & & - Task Start Time \\
\hline
\end{longtable}
\end{center}

\section{General Settings Menu}

The General Settings Menu will be accessible from the Hamburger Menu on the home screen.  When the user enters the General Settings Menu, the application will look up the settings and load them into a series of input fields they they can edit.  When the user saves their changes to the form, they will return to the Home Screen.  If the user clicks the back button without saving, they will be prompted with a pop-up that checks to make sure they really want to leave without saving.  If they say yes, their changes will not be saved and they will go back to the Home Screen.  Otherwise, they will not leave the General Settings and can continue editing.
\\\\
The following state diagram depicts the above process:
\\\\
\begin{center}
\includegraphics[scale=0.5]{settings.png}
\end{center}
\\\\
The UI will utilize the skeleton depicted in Figure 1 where each field follows the format specified by \textit{UI Patterns}.
\\\\
The information on this page will include all items specified in the General Settings Requirements.  The following table describes the Input Fields in more detail:

\begin{center}
\begin{longtable}{ | p{3cm} | p{6cm} | p{6cm} | }
\hline
\textbf{Field Name} & \textbf{Field Type} & \textbf{Default from Requirements} \\
\hline
Snap to Grid & Number (in minutes) & Settings.Toolbar.SnapToGrid.Default \\
\hline
Auto Scheduler & Number (in minutes) & Settings.AutoScheduling. \\
Break Time & & MinOpenTime.Default\\
\hline
Auto Scheduler & Number (in minutes) & Settings.AutoScheduling. \\
Min Event Time & & MinTime.Default\\
\hline
Auto Scheduler & Number (in minutes) & Settings.AutoScheduling. \\
Max Event Time & & MaxTime.Default\\
\hline
Language & Drop Down Menu with all & Settings.Language.Default \\
& supported languages as options & \\
\hline
Notifications & Drop Down with following choices & Settings.Events.Notifications.Default \\
& - Email & Default\\
& - Text & \\
& - Banner & \\
& - Pop-up & \\
& - None & \\
\hline
Notification Time & Number (in minutes) & Settings.Events.Notifications. \\
Before Event & & Time.Default \\
\hline
Event Duration & Number (in minutes) & Settings.Events.Duration.Default \\
\hline
Location & Text Field with Suggestions & Settings.Events.Location.Default \\
& based on other event locations & \\
\hline
\end{longtable}
\end{center}
The constraints specified in the Settings.AutoScheduling.* Requirements will be checked while the user is entering the form and if the constraints are not met, the user will be unable to save their changes.
\\\\
Note that the Settings.AutoScheduling.MinOpenTime Requirement was merged with the Settings.AutoScheduling.Breaks Requirement since they represent the same thing.

\section{Auto Scheduler Diff View}

diff

\section{Toolbar}

\subsection{Description}
The toolbar will allow the user to edit their schedule in the application's graphical display.
Each individual tool can be selected by clicking on the tool's corresponding icon, and deselected by clicking on the icon again. The tools provided on the toolbar will be: drag and drop, re-size, cut, copy, paste. Additionally, there will be buttons on the toolbar to create and event, edit an event, and change the view mode of the schedule.

\subsection{Drag and Drop Events}
This tool will be used to move the start and end times of an event from the graphical user interface (GUI) (Requirement: Toolbar.DragDrop). This tool will generally follow this sequence of events:
\begin{enumerate}
    \item User clicks on drag and drop icon in the toolbar. (requirement: Toolbar.Select.DragDrop)\\
    \\ & The GUI's event listener now responds to user clicks with the drag and drop tool. An attribute in the GUI will be an enumerated value and be set to a value predefined as the drag and drop tool.
    \item User clicks anywhere within the event and does not release. (requirement: Toolbar.DragDrop.Drag)\\
    \\ & The event will follow the user's cursor position with its top edge moved to the grid line closest to the user's cursor. The grid settings can be changed from the General Settings page.
    \item User releases event. (requirement: Toolbar.DragDrop.Release)\\
    \\ & The event's start time will be set to the time represented by the closest grid line when the user releases. The end time will be updated to maintain the original duration of the event.
\end{enumerate}

\subsection{Resize Events}
This tool will be used to change the duration of an event from the GUI. This tool will generally follow this sequence of events:
\begin{enumerate}
    \item User clicks on re-size icon in the toolbar. (requirement: Toolbar.Select.Re-size)\\
    \\ & The GUI's event listener now responds to user clicks with the re-size tool. An attribute in the GUI will be an enumerated value and be set to a value predefined as the re-size tool.
    \item User clicks on the top or bottom edge of an event and does not release. (requirement: Toolbar.Re-size.DragEdge)\\
    \\ & The selected edge of the event in the GUI will move up or down following the vertical movement of the user's cursor. The edge will move to the grid line closest to the user's cursor. The right and left edges of the event cannot be dragged.
    \item User releases edge. (requirement: Toolbar.Re-size.Release)\\
    \\ & If the user had clicked on the top edge of the event, the start time of the event will be updated to the time represented by the closest grid line when the user releases. Else, if the user had clicked on the bottom edge of the event, the end time of the event will be updated.
\end{enumerate}

\subsection{Cut}
This tool will be used to save and remove an event from the schedule via the GUI. This tool will generally follow this sequence of events:
\begin{enumerate}
    \item User clicks on cut tool icon in the toolbar. (requirement: Toolbar.Select.Cut)\\
    \\ & The GUI's event listener now responds to user clicks with the cut tool. An attribute in the GUI will be an enumerated value and be set to a value predefined as the copy tool.
    \item User clicks anywhere in the event and releases. (requirement: Toolbar.Cut)\\
    \\ & The event is removed from the GUI and the user's schedule. It is saved within the program for the creation of future copies of the event. The attributes that must be saved include its location, notification settings, locked status, description, name, duration, and parent if it is a deadline event. It replaces whatever previous event was stored in memory.
\end{enumerate}

\subsection{Copy}
This tool will be used to save an event from the schedule via the GUI. Unlike the cut tool above, it will preserve the original event in the schedule. This tool will generally follow this sequence of events:
\begin{enumerate}
    \item User clicks on copy tool icon in the toolbar. (requirement: Toolbar.Select.Copy)\\
    \\ & The GUI's event listener now responds to user clicks with the copy tool. An attribute in the GUI will be an enumerated value and be set to a value predefined as the copy tool.
    \item User clicks anywhere in the event and releases. (requirement: Toolbar.Copy)\\
    \\ & The event is saved within the program for the creation of future copies of the event. The attributes that must be saved include its location, notification settings, locked status, description, name, duration, and parent if it is a deadline event. It replaces whatever previous event was stored in memory. The original event remains in the schedule unchanged.
\end{enumerate}

\subsection{Paste}
This tool will be used to create a new event using the data from an event previously saved using the cut or copy tool via the GUI. This tool will generally follow this sequence of events:
\begin{enumerate}
    \item User clicks on paste tool icon in the toolbar (requirement: Toolbar.Select.Paste)\\
    \\ & The GUI's event listener now responds to user clicks with the paste tool. An attribute in the GUI will be an enumerated value and be set to a value predefined as the paste tool.
    \item User clicks and releases anywhere on the schedule (requirement: Toolbar.Paste)\\
    \\ & A new event will be created in the GUI and in the user's schedule with the same location, notification settings, locked status, description, name, and parent if it is a deadline event, as the event saved in memory. The start time will be set to the time represented by the closest grid line and the end time will be set to the appropriate time following the new start time to maintain the original event's duration. If there is no event stored in memory, no new event will be created. Events created with this tool can overlap with existing events.
\end{enumerate}

\subsection{Create and Edit Event}
A button on the toolbar labelled "create" takes the user to the form to create a new event from scratch (requirement: Event.Create). A second button on the toolbar takes the user to a similar form, which differs from the create form with an additional delete button, to edit the existing information of the event (requirement: Event.Edit). The form will prompt the user for the following information:
\begin{longtable}{ | p{3cm} | p{7cm} | p{5cm} | }
\hline
\textbf{Information} & \textbf{Format} & \textbf{Corresponding Requirement}\\
\hline 
Name & Text Field & Event.Name\\
\hline 
Description & Text Field & Event.Description\\
\hline
Start Date & Date Picker (Values for year, month, day enumerated. User selects value from a menu. Based on Android GUI feature) & Event.TimePeriod\\& & Event.Standard.StartTime\\
\hline
Start Time & Time Picker (Values for hour, minute, second, am/pm enumerated. User selects value from a menu. Based on Android GUI feature) & Event.TimePeriod\\& & Event.Standard.StartTime\\
\hline
End Date & Date Picker (Default same as start date) & Event.TimePeriod\\& & Event.Standard.EndTime\\
\hline
End Time & Time Picker (Default an hour after start time) & Event.TimePeriod\\& & Event.Standard.EndTime\\
\hline
Location & Text Field & Event.Location\\
\hline
Frequency & Drop Down Menu (contains pre-sets such as monthly, daily, weekly, or a custom setting) & Event.Frequency\\
\hline 
Notification Type & Checklist (contains options such as email, text, phone banner) & Event.Notifications\\
\hline
Notification Time & Drop Down Menu (contains pre-sets such as hour before, day before, or a custom value) & Event.Notifications\\
\hline
Locked Status & Check box & Event.Unlock\\
\hline 
Delete & Button (only appears for Edit form) & Event.Edit\\
\hline
Confirm & Button & Event.Create\\& & Event.Edit\\
\hline
\end{longtable}

\subsection{View Mode}

The Toolbar's last item will allow the user to cycle through the method in which the calendar displays events.  There are 3 views that the user can choose from: Day, Week Month. \\

The Day view shows the user an hourly schedule on the currently selected day.  Swiping left or right will allow the user to look at future or past days (respectively). See Figure 2a for more information. \\

The Week view shows the user the seven days of the currently selected week with an hourly schedule on each of those days.  Swiping left or right will allow the user to look at future or past weeks (respectively). See Figure 2b for more information. \\

The Month view show the user all the events in the currently selected month.  The day of the week and day of the month are used to organize the events.  Swiping left or right will allow the user to look at future or past months (respectively).  See Figure 2c for more information. \\

\chapter{Auto Scheduler}

schedule

\chapter{Event Storage Classes}

classes

\chapter{Synchronization and Account}

sync

\chapter{Appendix A: Glossary}
%see https://en.wikibooks.org/wiki/LaTeX/Glossary
Auto-Scheduler - Creates events in advance of deadlines. Can move unlocked events around. See section Auto Scheduling.\\
\\
Event - A block of time on the scheduler with characteristics such as start time, end time,
location, description, name, locked toggle, etc. (see Event functional requirements).\\
\\
\chapter{Appendix B: Figures}

\section{Figure 1: Form Layout UI}

$<$$<$Form skeleton$>$$>$

\section{Figure 2: Home Screen Skeleton}

The following three figures show the skeleton for the Home Screen in the three view modes: Day, Week, and Month.  Below the Date in all of the views is the Toolbar which have numbers in the boxes.  These are placeholders for the tool that will appear there.  The follow table describes what tool each number stands for:\\

\begin{center}
\begin{longtable}{ | p{0.3cm} | p{7.5cm} | }
\hline
\textbf{1} & Copy Selected Event to Clipboard \\
\hline
\textbf{2} & Paste Event on Clipboard \\
\hline
\textbf{3} & Cut Selected Event from Home to Clipboard \\
\hline
\textbf{4} & Enable Drag and Drop \\
\hline
\textbf{5} & Enable Resize \\
\hline
\textbf{6} & Create Event \\
\hline
\textbf{7} & Edit Selected Event \\
\hline
\textbf{8} & Cycle View Mode \\
\hline
\end{longtable}
\end{center}

Additionally, in the top left corner of each of the following 3 figures, there is a button with three lines on it to represent the Hamburger menu.  When the user clicks on that, the Hamburger menu will display Figure 3a or 3b based on whether the user is logged in.

\subsection{Figure 2a: Day View}

\begin{center}
\includegraphics{day.PNG}
\end{center}

In the above figure, the calendar displays events on an hourly basis in blocks where the top and bottom represent the approximate start and end time of the event.

\subsection{Figure 2b: Week View}

\begin{center}
\includegraphics{week.PNG}
\end{center}

In the above figure, the calendar displays events similar to the daily view, except that it divides the horizontal width of the screen by 7 to allow all 7 days of the week to be displayed.  The top and bottom of the event boxes correspond to the approximate start and end times of the events.

\subsection{Figure 2c: Month View}

\begin{center}
\includegraphics{month.PNG}
\end{center}


In the above figure, the calendar displays all the events in the selected month.  Each event during a particular day is listed under that day such that the user can click on it, but the separation between the events does not correspond to start and end time.  The event names are simply list and the user could click and edit them if they want to see more information.

\section{Figure 3: Hamburger Menu}

The following two figures depict the skeleton for the Hamburger Menu when the user is logged in and logged out. Each box on the Hamburger menu is a button that brings up the relevant page (except the "$<$Account Email$>$" box which just allows the user to view their email on their account).

\subsection{Figure 3a: User Logged In}

\begin{center}
\includegraphics{hmlogin.PNG}
\end{center}

\subsection{Figure 3b: User Logged Out}

\begin{center}
\includegraphics{hmlogout.PNG}
\end{center}

\end{document}