%Copyright 2014 Jean-Philippe Eisenbarth
%This program is free software: you can
%redistribute it and/or modify it under the terms of the GNU General Public
%License as published by the Free Software Foundation, either version 3 of the
%License, or (at your option) any later version.
%This program is distributed in the hope that it will be useful,but WITHOUT ANY
%WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
%PARTICULAR PURPOSE. See the GNU General Public License for more details.
%You should have received a copy of the GNU General Public License along with
%this program.  If not, see <http://www.gnu.org/licenses/>.

%Based on the code of Yiannis Lazarides
%http://tex.stackexchange.com/questions/42602/software-requirements-specification-with-latex
%http://tex.stackexchange.com/users/963/yiannis-lazarides
%Also based on the template of Karl E. Wiegers
%http://www.se.rit.edu/~emad/teaching/slides/srs_template_sep14.pdf
%http://karlwiegers.com
\documentclass{scrreprt}
\usepackage{listings}
\usepackage{underscore}
\usepackage[bookmarks=true]{hyperref}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{longtable}
\usepackage{graphicx}
\graphicspath{ {./images/} }
\hypersetup{
    colorlinks=true,
    bookmarks=false,    % show bookmarks bar?
    pdftitle={Design Document},    % title
    pdfauthor={Jean-Philippe Eisenbarth},                     % author
    pdfsubject={TeX and LaTeX},                        % subject of the document
    pdfkeywords={TeX, LaTeX, graphics, images}, % list of keywords
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=blue,       % color of internal links
    citecolor=black,       % color of links to bibliography
    filecolor=black,        % color of file links
    urlcolor=purple,        % color of external links
    linktoc=page            % only page is linked
}%
\def\myversion{1.0 }
\date{}
%\title{%

%}
\usepackage{hyperref}
\begin{document}

\begin{flushright}
    \rule{16cm}{5pt}\vskip1cm
    \begin{bfseries}
        \Huge{SOFTWARE ARCHITECTURE}\\
        \vspace{1.9cm}
        for\\
        \vspace{1.9cm}
        GBUS Scheduling App\\
        \vspace{1.9cm}
        \LARGE{Version \myversion approved}\\
        \vspace{1.9cm}
        Prepared by Jack Doiron, Jared Cassarly, Shota Nemoto, Martin Peters\\
        \vspace{1.9cm}
        \today\\
    \end{bfseries}
\end{flushright}

\tableofcontents


\chapter*{Revision History}

\begin{center}
    \begin{tabular}{|c|c|c|c|}
        \hline
	    Name & Date & Reason For Changes & Version\\
        \hline
	    Jack Doiron & 2/22/19 & initial draft & 1.0 draft 1\\
        \hline
    \end{tabular}
\end{center}

\chapter{Introduction}

\section{References}
UIPatterns.io. \textit{UI Patterns},\\
http://uipatterns.io

\chapter{User Interface}

This section explains the design for the requirements mentioned in section 3.1 of the Software Requirements Specification document.

\section{Home Screen}

The Home Screen will be the default page for the application.  It will display the current date, Toolbar, and a view of the user's calendar of events if logged in.  If the user is not logged in, the calendar will be empty. See Figure 2a-2c for a skeleton of the Home Screen on each view mode.\\
\\
When the application opens, the calendar will show the view with the current day.  swiping left or right will allow the user to look at future or past events (respectively) based on the currently selected view mode.\\
\\
The Home Screen will also have a Hamburger Menu where the user can access their account information and the General Settings.\\
\\
In regards to account information, the user will be able to bring up fields to change their account email and password.  Additionally, the user will be able to bring up login, logout, and registration menus from the Hamburger Menu.  See Figure 3a for a skeleton of the Hamburger Menu when the user is logged in and Figure 3b for a skeleton of the Hamburger Menu when the user is logged out.\\
\\
Finally, the Home Screen will need to load in less than 3 seconds. \\
\\

\subsection{Attributes}

\begin{center}
\begin{longtable}{ | p{5cm} | p{5cm} | p{5cm} | }
\hline
\textbf{Attribute Name} & \textbf{Type} & \textbf{Description} \\
\hline
events & Event[] & The list of events being displayed on the calendar \\
\hline
toolbarState & Toolbar & The object that stores the state of the Toolbar for the calendar \\
\hline
date & Date Object & the date being displayed on the Home Screen
\hline
hamburgerMenuState & Boolean & true if the Hamburger Menu is open, false if closed \\
\hline
\end{longtable}
\end{center}

\subsection{Methods}

\begin{center}
\begin{longtable}{ | p{5cm} | p{2cm} | p{3cm} | p{5cm} | }
\hline
\textbf{Method Name} & \textbf{Return Type} & \textbf{Parameters} & \textbf{Description} \\
\hline
displayEvents & void & Event[] & Takes a list of events and displays the events appropriately on the calendar based on the view mode and Figure 2 \\
\hline
displayToolbar & void & void & Displays all the parts of the Toolbar defined below as per Figure 2 \\
\hline
displayDate & void & void & Displays the date at the top of the screen as per Figure 2 \\
\hline
displayHamburgerMenu & void & void & Displays the Hamburger Menu in the top right of the screen as per Figure 2 \\
\hline
toolbarEventListener & void & void & Listens for events from the toolbar and updates the GUI accordingly \\
\hline
openHamburgerMenu & void & void & Opens the Hamburger Menu overlay when the user clicks the button \\
\hline
closeHamburgerMenu & void & void & Closes the Hamburger Menu overlay when the user clicks off the menu when it is open \\
\hline
hamburgerEventListener & void & void & Waits for the user to click on a button in the Hamburger Menu and then performs the relevant function. \\
\hline
\end{longtable}
\end{center}

The first 4 methods that display items on the Home Screen are called whenever the user moves to the Home Screen.

\section{General Input Form}

Whenever the application needs to get data based on Figure 1, the UI class will have the following methods:

\subsection{Attributes}

\begin{center}
\begin{longtable}{ | p{3cm} | p{3cm} | p{9cm} | }
\hline
\textbf{Attribute Name} & \textbf{Type} & \textbf{Description} \\
\hline
FieldEnum & Final Enum & Enum object that specifies the choices for the type of input field to load: STANDARD, LOCATION, DEADLINE, SETTINGS, and EVENT.  EVENT specifies a drop-down menu to load for choosing a different enum value. \\
\hline
\end{longtable}
\end{center}

\subsection{Methods}

\begin{center}
\begin{longtable}{ | p{3cm} | p{2cm} | p{2cm} | p{8cm} | }
\hline
\textbf{Method Name} & \textbf{Return Type} & \textbf{Parameters} & \textbf{Description} \\
\hline
loadInputFields & abstract void & FieldEnum & Loads the proper input fields based on the Event type specified by the FieldEnum passed in.\\
\hline
waitForUserInput & void & void & Waits for the user to fill out the form and click back or save. \\
\hline
saveForm & abstract void & void & Saves the changes the user made and handles the storage appropriately \\
\hline
back & void & void & Checks if there are unsaved changes to the fields in the form being edited.  If there are unsaved changes, it displays a pop-up that asks the user if they really want to exit the form.  If they do, then it discards the changes and calls exitForm.  Otherwise, the application continues waiting for user input on the form.  If there are no unsaved changes, then the application just calls exitForm.\\
\hline
exitForm & void & void & Leaves the form and goes back to the Home Screen \\
\hline
\end{longtable}
\end{center}

This form should load in less than 3 seconds. \\

\section{Event Editing and Creation Menu}

When the user wants to create an event, they will be able to click the Create event on the Toolbar.  When they do so, they will be presented with a choice of creating a Standard, Location, or Deadline event (from a drop down menu). Once the user makes their decision, a form with the necessary items to create an event will be displayed.  All of the items will have default values filled in based on the General Settings or global defaults.
\\\\
Additionally, the same form can be pulled up from any existing event by clicking on  it.  All the default values in the form will be the values stored in the chosen Event object.
\\\\
The form the user sees will have a skeleton matching figure 1 where each field follows the format specified by \textit{UI Patterns}.  Thus, the event editing/creation menu will extend the General Input Form Class.
\\\\
Once the user finishes filling in the form, they can either save the form and go back to the Home Screen or discard the changes and return to the Home Screen.
\\
One exception to the aforementioned exiting process is with Deadline events.  Once the user clicks save on a Deadline event, they will be presented with a diff between their old calendar and the changes the auto scheduler proposes based on the information provided for the deadline event.  The user will be given the option to accept the changes or reject them (returning them to the input form).  Upon acceptance, the changes are saved and the user goes back to the home screen.
\\\\
The following diagram shows the flow of this editing/creation process.
\\\\
\begin{center}
\includegraphics[scale=0.5]{edit.png}
\end{center}

\subsection{Standard Event Input Fields}
The following table describes the input fields shown to the user for a Standard Event
\begin{center}
\begin{longtable}{ | p{3cm} | p{8cm} | p{4cm} | }
\hline
\textbf{Field Name} & \textbf{Field Type} & \textbf{Default Value for Creation} \\
\hline
Name & Text Field & "" \\
\hline
Description & Text Field & "" \\
\hline
Event Start & Time and Date Input & Current Time and Date \\
\hline
Event End & Time and Date Input & Current Time and Date \\
& & Plus General Settings \\
& & Default Duration \\
\hline
Location & Text Field with Suggestions & General Settings \\
& based on other event locations & Default \\
\hline
Frequency & Drop Down with following choices & Just Once \\
& - Just Once & \\
& - Daily & \\
& - Weekly & \\
& - Monthly & \\
& - Yearly & \\
& - Custom & \\
\hline
Notifications & Drop Down with following choices & General Settings\\
& - Email & Default\\
& - Text & \\
& - Banner & \\
& - Push & \\
& - None & \\
\hline
Notification Time & Number (in minutes) & General Settings \\
Before Event & & Default \\
\hline
Locked & Checkbox & True \\
\hline
\end{longtable}
\end{center}

The custom option for frequency causes a popup like in Figure 4 to come up and the user then chooses the days of the week their event repeats on.  Once they do that, the custom settings are saved and then frequency field is completed and updated.

\subsection{Location Event Input Fields}
The Location event will have have the same input fields as the Standard event except without the Locked field

\subsection{Deadline Event Input Fields}
The following table describes the input fields shown to the user for a Deadline Event

\begin{center}
\begin{longtable}{ | p{3cm} | p{8cm} | p{4cm} | }
\hline
\textbf{Field Name} & \textbf{Field Type} & \textbf{Default Value for Creation} \\
\hline
Name & Text Field & "" \\
\hline
Description & Text Field & "" \\
\hline
Task Start Time & Time and Date Input & Current Time and Date \\
\hline
Task Deadline & Time and Date Input & Current Time and Date \\
& & Plus General Settings \\
& & Default Duration \\
\hline
Location & Text Field with Suggestions & General Settings \\
& based on other event locations & Default \\
\hline
Use Location & Checkbox & True \\
For Auto & & \\
Scheduling & & \\
\hline
Minimum Time & Number & General Settings \\
for Scheduled & & Default\\
Events & & \\
\hline
Maximum Time & Number & General Settings \\
for Scheduled & & Default\\
Events & & \\
\hline
Minimum Break & Number & General Settings \\
Time between & & Default\\
 Scheduled Events & & \\
\hline
Total Time to & Number (in Hours) & Task Deadline \\
Complete Task & & - Task Start Time \\
\hline
\end{longtable}
\end{center}

\subsection{Attributes}

The event editing and creation menu will have all attributes from the parent General Input Form class along with the following:

\begin{center}
\begin{longtable}{ | p{3cm} | p{3cm} | p{9cm} | }
\hline
\textbf{Attribute Name} & \textbf{Type} & \textbf{Description} \\
\hline
accountEvents & Event[] & Reference to the list of events on the user's account \\
\hline
\end{longtable}
\end{center}

Additionally, the edit/creation form will not use the SETTINGS field in the FieldEnum.

\subsection{Methods}

The event editing and creation menu will have all methods from the parent General Input Form class along with the following:

\begin{center}
\begin{longtable}{ | p{3cm} | p{1cm} | p{2cm} | p{9cm} | }
\hline
\textbf{Method Name} & \textbf{Return Type} & \textbf{Parameters} & \textbf{Description} \\
\hline
loadInputFields & void & FieldEnum & Loads the proper input fields based on the Input Field type specifed by the FieldEnum passed in. STANDARD, LOCATION, and DEADLINE specify the corresponding input fields from above.  DEFAULT specifies that a drop-down menu to get ask for a different FieldEnum should be used. \\
\hline
saveForm & void & void & Saves the changes the user made and adds the event to the account's Event list
\hline
displayDiff & void & void & Displays the auto-scheduler diff for Deadline Events when the user finishes filling out the form. Also waits for the user to accept or reject the diff. \\
\hline
\end{longtable}
\end{center}

Note that the loadInputFields method is called with the DEFAULT input when a event is being created. Once the user selects and event type, the same method is called again based on the chosen event type.\\\\
If the user us editing an event, loadInputFields gets the event type based on teh type of event being edited.\\\\

\section{General Settings Menu}

The General Settings Menu will be accessible from the Hamburger Menu on the home screen.  When the user enters the General Settings Menu, the application will look up the settings and load them into a series of input fields they they can edit.  When the user saves their changes to the form, they will return to the Home Screen.  If the user clicks the back button without saving, they will be prompted with a pop-up that checks to make sure they really want to leave without saving.  If they say yes, their changes will not be saved and they will go back to the Home Screen.  Otherwise, they will not leave the General Settings and can continue editing.
\\\\
The following state diagram depicts the above process:
\\\\
\begin{center}
\includegraphics[scale=0.5]{settings.png}
\end{center}
The UI will utilize the skeleton depicted in Figure 1 where each field follows the format specified by \textit{UI Patterns}.
\\\\
The information on this page will include all items specified in the General Settings Requirements.  The following table describes the Input Fields in more detail:

\subsection{Input Fields}

\begin{center}
\begin{longtable}{ | p{3cm} | p{6cm} | p{6cm} | }
\hline
\textbf{Field Name} & \textbf{Field Type} & \textbf{Default from Requirements} \\
\hline
Snap to Grid & Number (in minutes) & Settings.Toolbar.SnapToGrid.Default \\
\hline
Auto Scheduler & Number (in minutes) & Settings.AutoScheduling. \\
Break Time & & MinOpenTime.Default\\
\hline
Auto Scheduler & Number (in minutes) & Settings.AutoScheduling. \\
Min Event Time & & MinTime.Default\\
\hline
Auto Scheduler & Number (in minutes) & Settings.AutoScheduling. \\
Max Event Time & & MaxTime.Default\\
\hline
Language & Drop Down Menu with all & Settings.Language.Default \\
& supported languages as options & \\
\hline
Notifications & Drop Down with following choices & Settings.Events.Notifications.Default \\
& - Email & Default\\
& - Text & \\
& - Banner & \\
& - Push & \\
& - None & \\
\hline
Notification Time & Number (in minutes) & Settings.Events.Notifications. \\
Before Event & & Time.Default \\
\hline
Event Duration & Number (in minutes) & Settings.Events.Duration.Default \\
\hline
Location & Text Field with Suggestions & Settings.Events.Location.Default \\
& based on other event locations & \\
\hline
\end{longtable}
\end{center}
The constraints specified in the Settings.AutoScheduling.* Requirements will be checked while the user is entering the form and if the constraints are not met, the user will be unable to save their changes.
\\\\
Note that the Settings.AutoScheduling.MinOpenTime Requirement was merged with the Settings.AutoScheduling.Breaks Requirement since they represent the same thing.
\\\\
The general settings menu will extend the General Input Form Class

\subsection{Attributes}

The general settings menu will have all attributes from the parent General Input Form class along with the following:

\begin{center}
\begin{longtable}{ | p{3cm} | p{3cm} | p{9cm} | }
\hline
\textbf{Attribute Name} & \textbf{Type} & \textbf{Description} \\
\hline
accountSettings & Settings[] & Reference to the list of settings on the user's account \\
\hline
\end{longtable}
\end{center}

\subsection{Methods}

The general settings menu will have all methods from the parent General Input Form class along with the following:

\begin{center}
\begin{longtable}{ | p{3cm} | p{2cm} | p{2cm} | p{8cm} | }
\hline
\textbf{Method Name} & \textbf{Return Type} & \textbf{Parameters} & \textbf{Description} \\
\hline
loadInputFields & void & FeildEnum & Loads the input fields specified in the General Settings Input Field table above. Should always receive the SETTINGS value as the parameter.\\
\hline
saveForm & void & void & Saves the changes the user made and adds the event to the account's settings \\
\hline
\end{longtable}
\end{center}

\section{Auto Scheduler Diff View}

diff

\section{Toolbar}

toolbar

\subsection{Drag and Drop Events}

dragndrop

\subsection{Resize Events}

resize

\subsection{Cut/Copy/Paste}

copy pasta

\subsection{Create Event}

create

\subsection{Edit Event}

edit

\subsection{View Mode}

The Toolbar's last item will allow the user to cycle through the method in which the calendar displays events.  There are 3 views that the user can choose from: Day, Week Month. \\
\\
The Day view shows the user an hourly schedule on the currently selected day.  Swiping left or right will allow the user to look at future or past days (respectively). See Figure 2a for more information. \\
\\
The Week view shows the user the seven days of the currently selected week with an hourly schedule on each of those days.  Swiping left or right will allow the user to look at future or past weeks (respectively). See Figure 2b for more information. \\
\\
The Month view show the user all the events in the currently selected month.  The day of the week and day of the month are used to organize the events.  Swiping left or right will allow the user to look at future or past months (respectively).  See Figure 2c for more information. \\
\\

\chapter{Auto Scheduler}

schedule

\chapter{Event Storage Classes}

classes

\chapter{Synchronization and Account}

sync

\chapter{Appendix A: Glossary}
%see https://en.wikibooks.org/wiki/LaTeX/Glossary
Auto-Scheduler - Creates events in advance of deadlines. Can move unlocked events around. See section Auto Scheduling.\\
\\
Event - A block of time on the scheduler with characteristics such as start time, end time,
location, description, name, locked toggle, etc. (see Event functional requirements).\\
\\
Hamburger Menu - An overlay element of the UI that appears when the user clicks the icon depicted in the top right corner of Figures 2a-2c.\\
\\
Toolbar - An element of the UI that allows the user to select different options for editing their calendar.  See the Toolbar section for more information. \\
\\
Banner Notification - A type of notification that appears on a phone across the top of the screen. \\
\\
Time Object - A standard Time object in JavaScript \\
\\
Date Object - A standard Date object in JavaScript \\
\\
\chapter{Appendix B: Figures}

\section{Figure 1: Form Layout UI}

\begin{center}
\includegraphics{eventform.PNG}
\end{center}

\section{Figure 2: Home Screen Skeleton}

The following three figures show the skeleton for the Home Screen in the three view modes: Day, Week, and Month.  Below the current date (top bar with DD/MM/YYYY) in all of the views is the Toolbar which have numbers in the boxes.  These are placeholders for the tool that will appear there.  The follow table describes what tool each number stands for:\\

\begin{center}
\begin{longtable}{ | p{0.3cm} | p{7.5cm} | }
\hline
\textbf{1} & Copy Selected Event to Clipboard \\
\hline
\textbf{2} & Paste Event on Clipboard \\
\hline
\textbf{3} & Cut Selected Event from Home to Clipboard \\
\hline
\textbf{4} & Enable Drag and Drop \\
\hline
\textbf{5} & Enable Resize \\
\hline
\textbf{6} & Create Event \\
\hline
\textbf{7} & Cycle View Mode \\
\hline
\end{longtable}
\end{center}

Additionally, in the top left corner of each of the following 3 figures, there is a button with three lines on it to represent the Hamburger menu.  When the user clicks on that, the Hamburger menu will display Figure 3a or 3b based on whether the user is logged in.

\subsection{Figure 2a: Day View}

\begin{center}
\includegraphics{day.PNG}
\end{center}

In the above figure, the calendar displays events on an hourly basis in blocks where the top and bottom represent the approximate start and end time of the event.

\subsection{Figure 2b: Week View}

\begin{center}
\includegraphics{week.PNG}
\end{center}

In the above figure, the calendar displays events similar to the daily view, except that it divides the horizontal width of the screen by 7 to allow all 7 days of the week to be displayed.  The top and bottom of the event boxes correspond to the approximate start and end times of the events.

\subsection{Figure 2c: Month View}

\begin{center}
\includegraphics{month.PNG}
\end{center}


In the above figure, the calendar displays all the events in the selected month.  Each event during a particular day is listed under that day such that the user can click on it, but the separation between the events does not correspond to start and end time.  The event names are simply list and the user could click and edit them if they want to see more information.

\section{Figure 3: Hamburger Menu}

The following two figures depict the skeleton for the Hamburger Menu when the user is logged in and logged out. Each box on the Hamburger menu is a button that brings up the relevant page (except the "$<$Account Email$>$" box which just allows the user to view their email on their account).

\subsection{Figure 3a: User Logged In}

\begin{center}
\includegraphics{hmlogin.PNG}
\end{center}

\subsection{Figure 3b: User Logged Out}

\begin{center}
\includegraphics{hmlogout.PNG}
\end{center}

\section{Figure 4: Custom Frequency Popup}

\begin{center}
\includegraphics[width=\textwidth]{customfreq.PNG}
\end{center}

The above figure depicts the the pop-up menu skeleton that is used for creating custom frequencies.  The menu consists of 7 check boxes for each day of the week.  In the above figure, it shows a custom event that repeats every Monday, Wednesday, and Friday.
\\\\
When the user clicks "save", the options they chose are used to finish the custom Frequency setup.

\end{document}
